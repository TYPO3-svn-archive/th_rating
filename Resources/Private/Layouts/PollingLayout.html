<f:if condition="{ajaxRef}"><f:then>
<div class="tx-thrating-pi1-content {settings.ratingContext}" id='tx-thrating-pi1-{ajaxRef}'>
<f:if condition="{staticPreContent}"><f:then>
	<div class='tx-thrating-staticPreContent'><f:format.raw>{staticPreContent}</f:format.raw></div>
</f:then></f:if>
	<div class='tx-thrating-content' aria-life="polite" aria-atomic="false" aria-relevant="text">
	<f:if condition="{preContent}"><f:then>
		<div class='tx-thrating-preContent'><f:format.raw>{preContent}</f:format.raw></div>
	</f:then></f:if>
	<f:if condition="{stepCount} > 0">
	  <f:then>
		<f:render section="content" />
		<f:if condition="{settings.fluid.layouts.polling.showSummary}"><f:then>
		<div class='tx-thrating-summary'>
			<f:comment><!-- display check regarding rating summary information --></f:comment>
			<f:if condition="{settings.fluid.layouts.polling.showCurrentPolls}"><f:then>
				<f:if condition="{currentRates}"><f:then>
					<f:translate key='fluid.layout.polling.currentRating' default='fluid.layout.polling.currentRating' arguments="{1:currentRates, 2:'{f:count(subject:\"{rating.votes}\")}'}"/>
					<f:if condition="{anonymousVotes}"><f:then>
					<br/><f:translate key='fluid.layout.polling.anonymousVotes' default='fluid.layout.polling.anonymousVotes' arguments='{1:anonymousVotes}'/>
					</f:then></f:if>
				</f:then><f:else>
					<f:translate key='fluid.layout.polling.noRatingDone' default='fluid.layout.polling.noRatingDone'/>
				</f:else></f:if>
				<br/>
			</f:then></f:if>
			<f:if condition="{settings.fluid.templates.ratinglinks.likesMode}"><f:then>
				<f:comment>Display nothing if we are in likesMode - Users rating is already shown in content section</f:comment>
			</f:then><f:else>
				<f:if condition="{voting}"><f:then>
					<f:comment><!-- display if any vote has be done yet --></f:comment>
					<f:render partial="usersRating" arguments="{voting:voting, ratingClass:ratingClass, ratingobject:ratingobject, ratingName:ratingName, stepCount:stepCount, usersRate:usersRate}"/>
				</f:then><f:else>
					<f:render partial="infoBlock" arguments="{anonymousVoting:anonymousVoting, voter:voter, ratingName:ratingName}"/>
				</f:else></f:if>	
			</f:else></f:if>
		</div>
		</f:then></f:if>	
	</f:then><f:else>
		<f:translate key='fluid.layout.polling.noRatingSteps' default='fluid.layout.polling.noRatingSteps'/>
	</f:else></f:if>
	
	<f:if condition="{postContent}"><f:then>
		<div class='tx-thrating-postContent'><f:format.raw>{postContent}</f:format.raw></div>
	</f:then></f:if>
	</div>
<f:if condition="{staticPostContent}"><f:then>
	<div class='tx-thrating-staticPostContent'><f:format.raw>{staticPostContent}</f:format.raw></div>
</f:then></f:if>
	<div class='tx-thrating-flash-message' aria-life="assertive" aria-atomic="false" aria-relevant="text">
		<f:flashMessages renderMode="div" />
	</div>
</div>
</f:then></f:if>
<f:comment><!--
Rating: <f:format.number decimals="1" decimalSeparator="," thousandsSeparator=".">{currentRates}</f:format.number> of {stepCount}. <f:count>{rating.votes}</f:count> vote(s).
*************************************************************************************************
* Forwarded variables
* --------------------
* {settings}			-	complete extension configuration array
* {ajaxRef}				-	Name of the ratinglink
* {ratingobject}		- 	Domain object: ratingabject
* {rating}				- 	Domain object: rating
* {voter}				-	Domain object: voter (anonymous voter if enabled an nobody is logged on)
* {currentRates}		-	calculated current rating
* {stepCount}			-	overall number of ratingsteps
* {anonymousVotes}		- 	number of anonymous votes being done on this rating
* {anonymousVoting}		-	true/false if anonymous voting is enabled
* {voting}				-	the users original vote (stepconf) domain object if one exists
* {usersRate}			-	style definition for users rating in percent
* {staticPreContent}	- 	HTML formatted content that will be includes IN FRONT OF extension content (NOT changed by AJAX)
* {staticPostContent}	- 	HTML formatted content that will be includes AFTER extension content (NOT changed by AJAX)
* {preContent}			- 	HTML formatted content that will be includes IN FRONT OF extension content (changed by AJAX)
* {postContent}			- 	HTML formatted content that will be includes AFTER extension content (changed by AJAX)
*************************************************************************************************
--></f:comment>